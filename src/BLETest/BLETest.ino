#include <BleConnectionStatus.h>
// #include "BLEMouseCustom.h"
#include <BleMouse.h>

#include <UMS3.h>

#include <math.h>
#include <string.h>


// Definitions ///////////////////////////////////////////


//////////////////////////////////////////////////////////

std::string deviceName = "InkSync";
std::string deviceMfgr = "The InkSync Boys";
int batteryLevel = 69;

BleMouse bleMouse(deviceName, deviceMfgr, batteryLevel);

int test[][3] = {{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,1,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,1,1},{0,1,1},{1,1,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,1,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,1,1},{1,0,1},{0,1,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{1,1,1},{1,0,1},{1,1,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{1,1,1},{1,0,1},{1,1,1},{1,0,1},{1,1,1},{1,0,1},{1,0,1},{1,1,1},{1,0,1},{1,0,1},{1,0,1},{0,1,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{1,0,1},{1,0,1},{1,-1,1},{1,0,1},{1,0,1},{1,-1,1},{1,0,1},{1,-1,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{1,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{1,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{1,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{1,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,-1,1},{-1,0,1},{0,-1,1},{-1,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,1,1},{-1,1,1},{-1,0,1},{0,1,1},{-1,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,1,1},{0,1,1},{-1,1,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,1,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{0,1,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{0,-1,1},{-1,0,1},{0,-1,1},{-1,-3,1}};
int testCount = sizeof(test)/sizeof(test[0]);
// int test2[][3] = {{100,0,1},{50,-50,1},{-50,-50,1},{-100,0,1},{-50,50,1},{50,50,1}};
// int test2Count = sizeof(test2)/sizeof(test2[0]);
int i = 0;
int pressed = 0;
char buffer[64];


void setup() {

  Serial.begin(115200);
  Serial.println("setup");

  bleMouse.begin();

  while(!bleMouse.isConnected()){
    delay(1000);
  }

  delay(5000);
}

void loop() {

  // Serial.println("Hello");
  // delay(1000);

  // uint8_t pressure = 1;
  
  // bleMouse.press();

  // for (int i = 0; i < 5; i++)
  // {
  //   bleMouse.move(30, 0, pressure);
  //   pressure += 10;
  //   delay(1000);
  //   bleMouse.move(0, 5, pressure);
  // }

  // bleMouse.release();

  // delay(3000);
  
  
  if (test[i][2] != pressed){
    pressed = test[i][2];
    if (pressed){
      bleMouse.press(MOUSE_LEFT);
    }
    else{
      bleMouse.release(MOUSE_LEFT);
    }
  }
  // sprintf(buffer, "move (%d, %d)\n", test[i][0], test[i][1]);
  // Serial.println(buffer);
  bleMouse.move(test[i][0], test[i][1]);
  i++;
  if (i >= testCount){ i = 0; }
  delay(3);  
  
}